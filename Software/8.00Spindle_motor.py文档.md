# 8.00Spindle_motor.py文档

## 概述
本节点用于接收名为 "spindle_motor" 的 ROS 主题发布的主轴相关参数，并根据参数执行相应的 Modbus 操作。主轴参数包括操作类型、地址、数值等。

## 导入的模块
- rospy：ROS Python 客户端库。
- ros_modbus_msg.msg：用于导入自定义消息。
- wrapper_modbus.d12_modbus_client：自定义的 D12 Modbus 客户端。

## 主要函数和方法

- **callback_spindle_motor(msg)**
  - 订阅主题 "spindle_motor" 的回调函数[回调函数的介绍](8.01回调函数的介绍)，根据接收到的主轴参数执行相应的 Modbus 操作。
  - 参数：
    - `msg (ros_modbus_msg.spindle_argument)`：接收到的主轴参数消息对象，包含操作类型、地址、数值等。
  - 返回值：
    - 无。
  - 此函数根据接收到的主轴参数消息中的操作类型和地址，调用相应的 Modbus 方法执行**读取或写入**操作。如果操作类型为写入，则根据消息中的数值进行写入。

- **主程序\_\_main\_\_ 部分**

  在主程序中，我们进行了以下操作：

  1. **初始化 ROS 节点**：
     使用 `rospy.init_node("spindle_motor")` 初始化了一个 ROS 节点，命名为 "spindle_motor"。

  2. **创建 Modbus 客户端**：
     使用 `D12ModbusClient` 类创建了一个 Modbus 客户端对象 `client`，并传入了 Modbus 设备的 IP 地址。

  3. **订阅主题**：
     使用 `rospy.Subscriber()` 订阅了名为 "**spindle_motor**" 的主题，并指定回调函数为 `callback_spindle_motor`。

  4. **进入 ROS 主循环**：
     使用 `rospy.spin()` 进入 ROS 主循环，等待接收主轴参数消息并执行相应的操作。

