# 1.02CAN介绍

## 1.CAN是什么？

CAN 是控制器局域网络 (Controller Area Network) 的简称。它是由研发和生产汽车电子产品著称的德国 BOSCH 公司开发的，并最终成为国际标准(ISO11519以及ISO11898)，是国际上应用最广泛的现场总线之一。

## 2.CAN的特点

①多主控制（I2C有主从机之分，CAN无所谓主机从机）
在总线空闲时，所有的单元都可开始发送消息（多主控制）。“最先”访问总线的单元可获得发送权（不管后面消息的优先级是否比自身的高）。多个单元“同时”开始发送时，发送高优先级 ID 消息的单元可获得发送权（只在同时发送时起作用）

②消息的发送（对比I2C是根据地址进行访问，这里ID非地址，而是一种表征优先级的标识符）
在 CAN 协议中，所有的消息都以固定的格式发送。当两个以上的单元同时开始发送消息时，根据ID (标识符) 决定优先级，对各消息 ID 的每个位进行逐个仲裁比较。仲裁获胜（被判定为优先级最高）的单元可继续发送消息，仲裁失利的单元则立刻停止发送而进行接收工作，此处这里ID非地址，而是一种表征优先级的标识符。

③系统的柔软性（对比I2C总线上的每个单元都有一个独立的地址）
与总线相连的单元没有类似于“地址”的信息。因此在总线上增加单元时，连接在总线上的其它单元的都不需要改变。

④通信速度（波特率）
由CAN的物理层就可以看出，CAN是一种异步通信方式，所以通信前必须统一好。同一网络上每个单元的波特率，即使有一个单元的通信速度与其它的不一样，此单元也会输出错误信号，妨碍整个网络的通信。不同网络间则可以有不同的通信速度。

⑤远程数据请求
可通过发送“遥控帧” 请求其他单元发送数据。

⑥错误检测功能·错误通知功能·错误恢复功能
所有的单元都可以检测错误（错误检测功能）检测出错误的单元会立即同时通知其他所有单元（错误通知功能）正在发送消息的单元一旦检测出错误，会强制结束当前的发送。强制结束发送的单元会不断反复地重新发送此消息直到成功发送为止（错误恢复功能）

⑦故障封闭
CAN 可以判断出错误的类型是总线上暂时的数据错误（如外部噪声等）还是持续的数据错误（如单元内部故障、驱动器故障、断线等）。由此功能，当总线上发生持续数据错误时，可将引起此故障的单元从总线上隔离出去。

⑧连接
CAN 总线可连接的单元总数理论上是没有限制的。但实际上可连接的单元数受总线上的时间延迟及电气负载的限制。

## 3.CAN的协议

ISO/OSI 基本参照模型和 CAN协议

## 4.CAN的使用方法

由于系统将CAN设备作为网络设备进行管理，因此在CAN总线应用开发方面，Linux提供了SocketCAN接口，使得CAN总线通信近似于和以太网的通信，应用程序开发接口更加通用，也更加灵活。