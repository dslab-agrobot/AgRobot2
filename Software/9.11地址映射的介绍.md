# 9.11地址映射的介绍
地址映射是计算机系统中的一个关键概念，它涉及到将程序中的逻辑地址转换为物理地址的过程。这种转换对于内存管理和多任务操作系统中的地址空间隔离至关重要。地址映射的过程通常由内存管理单元（MMU）完成，它确保每个程序都运行在自己的地址空间中，而不会干扰其他程序或系统的关键部分。

## 地址映射的类型：

1. **静态地址映射**：在程序编译或加载时确定的地址映射方式。逻辑地址直接映射到固定的物理地址，这种方式不适用于动态加载或多任务环境。
    
2. **动态地址映射**：在程序运行时动态生成的地址映射方式。这种方式允许操作系统根据当前的内存使用情况来分配和调整物理内存。
    

## 地址映射的实现机制：

1. **分段（Segmentation）**：将程序分为几个逻辑段（如代码段、数据段等），每个段有一个基址和限长。逻辑地址由段号和段内偏移组成，MMU根据段表将逻辑地址转换为物理地址。
    
2. **分页（Paging）**：将物理内存和虚拟内存都划分为固定大小的页，逻辑地址由页号和页内偏移组成。MMU通过页表将逻辑地址映射到物理地址。
    
3. **段页式（Segmented Paging）**：结合了分段和分页两种机制，使用段表来管理页表，提高了内存管理的灵活性和效率。
    

## 地址映射的作用：

1. **内存保护**：通过地址映射，操作系统可以防止程序访问未授权的内存区域，确保系统的稳定性和安全性。
    
2. **内存共享**：地址映射允许多个程序共享相同的物理内存区域，例如共享库或内存映射文件。
    
3. **虚拟内存**：地址映射使得程序可以使用比物理内存更大的地址空间，即虚拟内存。当物理内存不足时，可以将部分数据交换到磁盘上的交换空间。
    
4. **动态加载和链接**：动态地址映射支持程序的动态加载和链接，程序可以在运行时加载所需的模块，而不需要在编译时确定所有依赖。
    

## 地址映射的挑战：

1. **页表管理**：在分页系统中，页表的管理变得复杂，尤其是当系统运行大量程序时，需要有效的页表结构和内存管理策略。
    
2. **地址转换开销**：每次内存访问都需要进行地址转换，这可能会引入一定的性能开销。
    
3. **内存碎片**：动态地址映射可能导致内存碎片，尤其是在长时间运行多个程序的情况下。