# 4.00自定义消息文档---spindle_argument.msg

## 概述

- 此消息类型用于**主轴电机**[主轴电机的介绍](4.01主轴电机的介绍)的控制和通信，包含了操作类型、地址、数值以及要读取的寄存器数量等信息。

- 消息类型: `spindle_argument`

## 参数定义

1. **`oper `**

   - 数据类型：int16

   - 描述：操作类型。
   - 可能的值：`1`代表需要写入操作；其余数字均可代表读取（建议写入0）；

2. **`address`** 
   
   - 数据类型：int16

   - 描述：操作的地址。
   - 取值范围：根据应用程序定义的寄存器地址范围。
   
3. **`value`** (int16)
   
   - 数据类型：int16
   - 描述：写入操作的值。
   - 取值范围：`1` 表示启动电机；或 `0 `表示停止电机旋转；
   
4. **`num_reg`** (int16)
   
   - 数据类型：int16
   - 描述：读取操作时要读取的寄存器数量。
   - 取值范围：根据应用程序定义的寄存器数量范围。



## 使用方法及示例

- 正常使用：

  此消息类型用于在 ROS 节点[ROS节点的介绍](4.02ROS节点的介绍)之间传递控制和通信信息。

  基本示例代码：

  ```python
  # 导入消息类型
  from ros_modbus_msg.msg import spindle_argument
  
  # 创建消息对象并设置字段值
  msg = spindle_argument()
  msg.oper = 1          # 写入操作
  msg.address = 100     # 地址
  msg.value = 1        # 写入值
  msg.num_reg = 1       # 读取寄存器数量
  
  # 发布消息
  publisher.publish(msg)
  ```

  ```python
  # 订阅消息
  def callback_spindle_motor(msg):
      oper = msg.oper
      address = msg.address
      value = msg.value
      num_reg = msg.num_reg
  
      # 处理消息
      # ...
  
  # 创建订阅者
  subscriber = rospy.Subscriber("spindle_motor", spindle_argument, callback_spindle_motor)
  ```

- 本项目使用：

  本消息类型通过扩展了数字IO的Modbus控制器[Modbus控制器的介绍](4.03Modbus控制器的介绍)来控制主轴电机[主轴电机的介绍](4.04主轴电机的介绍)是否旋转，有两项任务：

  1. 控制是否旋转；

     完成此任务时，使用消息中的`oper`、`address`、`value`三个字段；其余字段使用默认值即可；

  2. 读取相关节点状态；

     完成此任务时，使用消息中的`oper`、`address`、`num_reg`三个字段；其余字段使用默认值即可；

     

### 注意事项

- 请根据具体的应用需求设置每个字段的值，并确保消息发送和接收的一致性。
- 需要确保发布者和订阅者节点都正确地导入和使用了此消息类型。